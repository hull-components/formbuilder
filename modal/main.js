this.Hull=this.Hull||{},this.Hull.templates=this.Hull.templates||{},this.Hull.templates._default=this.Hull.templates._default||{},Hull.templates._default["modal/edit"]=function(n,i,l,o,t){this.compilerInfo=[4,">= 1.0.0"],l=this.merge(l,n.helpers),t=t||{};var e,a="",d="function",s=this.escapeExpression;return a+='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n      <h4 class="modal-title">Editing '+s((e=i&&i.options,e=null==e||e===!1?e:e.title,typeof e===d?e.apply(i):e))+'</h4>\n    </div>\n    <div class="modal-body">\n      <div data-hull-component=\'builder@formbuilder\' data-hull-id="'+s((e=i&&i.form,e=null==e||e===!1?e:e.id,typeof e===d?e.apply(i):e))+'"></div>\n    </div>\n  </div>\n</div>\n'},Hull.templates._default["modal/modal"]=function(n,i,l,o,t){function e(n,i){var o,t,e,d="";return d+="\n  ",t=l.ifEqual||n&&n.ifEqual,e={hash:{},inverse:c.program(7,r,i),fn:c.program(2,a,i),data:i},o=t?t.call(n,n&&n.modalEngine,"bootstrap",e):v.call(n,"ifEqual",n&&n.modalEngine,"bootstrap",e),(o||0===o)&&(d+=o),d+="\n"}function a(n,i){var o,t="";return t+='\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n          <h4 class="modal-title" id="myModalLabel">'+p((o=n&&n.options,o=null==o||o===!1?o:o.title,typeof o===f?o.apply(n):o))+'</h4>\n        </div>\n        <div class="modal-body">\n          ',o=l["if"].call(n,n&&n.displayForm,{hash:{},inverse:c.program(5,s,i),fn:c.program(3,d,i),data:i}),(o||0===o)&&(t+=o),t+="\n        </div>\n      </div>\n    </div>\n  "}function d(n){var i,l="";return l+="\n          <div data-hull-component='form@formbuilder' data-hull-id=\""+p((i=n&&n.form,i=null==i||i===!1?i:i.id,typeof i===f?i.apply(n):i))+'"></div>\n          '}function s(){return"\n          <div data-hull-component='login/shopify@hull' data-hull-redirect-on-login=\"false\"></div>\n          "}function r(n,i){var o,t="";return t+='\n    <div style="min-width:800px; min-height: 50%;">\n      ',o=l["if"].call(n,n&&n.displayForm,{hash:{},inverse:c.program(10,h,i),fn:c.program(8,m,i),data:i}),(o||0===o)&&(t+=o),t+="\n    </div>\n  "}function m(n){var i,l="";return l+="\n      <div data-hull-component='form@formbuilder' data-hull-id=\""+p((i=n&&n.form,i=null==i||i===!1?i:i.id,typeof i===f?i.apply(n):i))+'"></div>\n      '}function h(){return"\n      <div data-hull-component='login/shopify@hull' data-hull-redirect-on-login=\"false\"></div>\n      "}this.compilerInfo=[4,">= 1.0.0"],l=this.merge(l,n.helpers),t=t||{};var u,f="function",p=this.escapeExpression,c=this,v=l.helperMissing;return u=l["if"].call(i,i&&i.displayModal,{hash:{},inverse:c.noop,fn:c.program(1,e,t),data:t}),u||0===u?u:""},Hull.component({refreshEvents:["hull.auth.login"],templates:["modal","edit"],datasources:{form:":id"},initialize:function(){this.modalOpened=!1,this.sandbox.on("form.edit",function(n){this.render("edit",{formName:n,displayModal:!0})},this),this.sandbox.on("form.saved",function(){this.hide()},this),this.detectModalEngine()},detectModalEngine:function(){var n=this;$.fn.modal?(this.modalEngine="bootstrap",this.$el.on("hide.bs.modal",function(){n.modalOpened=!1}),this.$el.on("show.bs.modal",function(){n.modalOpened=!1}),this.modal=function(i){n.$el.modal(i)}):$.fn.fancybox&&(this.modalEngine="fancybox",this.modal=function(i){"show"===i?($.fancybox(n.$el),n.modalOpened=!0):"hide"===i&&($.fancybox.close(),n.modalOpened=!1)})},beforeRender:function(n){var i=n.form.uid,l=!1;n.me&&n.me.profile&&n.me.profile[i]&&(n.formData=l=n.me.profile[i]),n.formComplete=l,n.displayForm=this.loggedIn()&&!n.formComplete,n.displayModal=!this.loggedIn()||!n.formComplete,n.modalEngine=this.modalEngine},afterRender:function(n){var i=this;this.detectModalEngine(),n.displayModal?setTimeout(function(){i.show()},this.options.delay||1e3):this.hide()},show:function(){this.modalOpened||this.modal("show")},hide:function(){this.modal("hide")}});