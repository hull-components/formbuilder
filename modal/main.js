this.Hull=this.Hull||{},this.Hull.templates=this.Hull.templates||{},this.Hull.templates._default=this.Hull.templates._default||{},Hull.templates._default["modal/edit"]=function(n,l,o,i,t){this.compilerInfo=[4,">= 1.0.0"],o=this.merge(o,n.helpers),t=t||{};var a,e="",d="function",s=this.escapeExpression;return e+='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n      <h4 class="modal-title">Editing '+s((a=l&&l.options,a=null==a||a===!1?a:a.title,typeof a===d?a.apply(l):a))+'</h4>\n    </div>\n    <div class="modal-body">\n      <div data-hull-component=\'builder@formbuilder\' data-hull-id="'+s((a=l&&l.form,a=null==a||a===!1?a:a.id,typeof a===d?a.apply(l):a))+'"></div>\n    </div>\n  </div>\n</div>\n'},Hull.templates._default["modal/modal"]=function(n,l,o,i,t){function a(n,l){var i,t,a,d="";return d+="\n  ",t=o.ifEqual||n&&n.ifEqual,a={hash:{},inverse:c.program(7,r,l),fn:c.program(2,e,l),data:l},i=t?t.call(n,(i=n&&n.options,null==i||i===!1?i:i.modalEngine),"bootstrap",a):v.call(n,"ifEqual",(i=n&&n.options,null==i||i===!1?i:i.modalEngine),"bootstrap",a),(i||0===i)&&(d+=i),d+="\n"}function e(n,l){var i,t="";return t+='\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n          <h4 class="modal-title" id="myModalLabel">'+p((i=n&&n.options,i=null==i||i===!1?i:i.title,typeof i===f?i.apply(n):i))+'</h4>\n        </div>\n        <div class="modal-body">\n          ',i=o["if"].call(n,n&&n.displayForm,{hash:{},inverse:c.program(5,s,l),fn:c.program(3,d,l),data:l}),(i||0===i)&&(t+=i),t+="\n        </div>\n      </div>\n    </div>\n  "}function d(n){var l,o="";return o+="\n          <div data-hull-component='form@formbuilder' data-hull-id=\""+p((l=n&&n.form,l=null==l||l===!1?l:l.id,typeof l===f?l.apply(n):l))+'"></div>\n          '}function s(){return"\n          <div data-hull-component='login/shopify@hull' data-hull-redirect-on-login=\"false\"></div>\n          "}function r(n,l){var i,t="";return t+="\n    ",i=o["if"].call(n,n&&n.displayForm,{hash:{},inverse:c.program(10,u,l),fn:c.program(8,m,l),data:l}),(i||0===i)&&(t+=i),t+="\n  "}function m(n){var l,o="";return o+="\n    <div data-hull-component='form@formbuilder' data-hull-id=\""+p((l=n&&n.form,l=null==l||l===!1?l:l.id,typeof l===f?l.apply(n):l))+'"></div>\n    '}function u(){return"\n    <div data-hull-component='login/shopify@hull' data-hull-redirect-on-login=\"false\"></div>\n    "}this.compilerInfo=[4,">= 1.0.0"],o=this.merge(o,n.helpers),t=t||{};var h,f="function",p=this.escapeExpression,c=this,v=o.helperMissing;return h=o["if"].call(l,l&&l.displayModal,{hash:{},inverse:c.noop,fn:c.program(1,a,t),data:t}),h||0===h?h:""},Hull.component({refreshEvents:["hull.auth.login"],templates:["modal","edit"],datasources:{form:":id"},initialize:function(){this.modalOpened=!1,this.sandbox.on("form.edit",function(n){this.render("edit",{formName:n,displayModal:!0})},this),this.sandbox.on("form.saved",function(){this.hide()},this),this.detectModalEngine()},detectModalEngine:function(){var n=this;$.fn.fancybox?(this.options.modalEngine="fancybox",this.modal=function(l){"show"===l?($.fancybox(n.$el),n.modalOpened=!0):"hide"===l&&($.fancybox.close(),n.modalOpened=!1)}):$.fn.modal&&(this.options.modalEngine="bootstrap",this.$el.on("hide.bs.modal",function(){n.modalOpened=!1}),this.$el.on("show.bs.modal",function(){n.modalOpened=!1}),this.modal=function(l){n.$el.modal(l)})},beforeRender:function(n){var l=n.form.uid,o=!1;n.me&&n.me.profile&&n.me.profile[l]&&(n.formData=o=n.me.profile[l]),n.formComplete=o,n.displayForm=this.loggedIn()&&!n.formComplete,n.displayModal=!this.loggedIn()||!n.formComplete},afterRender:function(n){var l=this;this.detectModalEngine(),n.displayModal?setTimeout(function(){l.show()},this.options.delay||1e3):this.hide()},show:function(){this.modalOpened||this.modal("show")},hide:function(){this.modal("hide")}});