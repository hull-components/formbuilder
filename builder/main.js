this.Hull=this.Hull||{},this.Hull.templates=this.Hull.templates||{},this.Hull.templates._default=this.Hull.templates._default||{},Hull.templates._default["builder/main"]=function(e,i,t,s,n){function a(){return'\n<div class="alert alert-warning">\n  You must be logged as an admin to do that...\n</div>\n'}this.compilerInfo=[4,">= 1.0.0"],t=this.merge(t,e.helpers),n=n||{};var r,o=this;return r=t.unless.call(i,i&&i.isAdmin,{hash:{},inverse:o.noop,fn:o.program(1,a,n),data:n}),r||0===r?r:""},Hull.component({templates:["main"],require:["formbuilder"],datasources:{form:function(){var e={path:this.options.id};return this.options.namespace&&(e.provider="admin@"+this.options.namespace),this.api(e)}},initialize:function(){Formbuilder.options.AUTOSAVE=!1,this.injectLinkTag("formbuilder-combined")},beforeRender:function(e){this.formId=e.form.id,e.isAdmin=e.me.id&&e.me.is_admin},afterRender:function(e){if(e.isAdmin){var i=this,t=[];e.form.extra&&e.form.extra.fields&&(t=e.form.extra.fields||[]),this.$builder=new Formbuilder({selector:this.$el,bootstrapData:t}),this.$builder.on("save",function(e){i.saveForm.call(i,JSON.parse(e).fields)})}},saveForm:function(e){var i={path:this.formId};this.options.namespace&&(i.provider="admin@"+this.options.namespace),this.api.put(i,{type:"form",extra:{fields:e}})},injectLinkTag:function(e){if(!this.linkTagInjected&&this.options.injectLinkTag!==!1){var i=document.createElement("link");i.href=this.options.baseUrl+"/css/"+e+".css",i.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(i),this.linkTagsInjected=!0}}});