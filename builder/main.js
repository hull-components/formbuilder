this.Hull=this.Hull||{},this.Hull.templates=this.Hull.templates||{},this.Hull.templates._default=this.Hull.templates._default||{},Hull.templates._default["builder/main"]=function(e,t,i,s,n){function a(){return'\n<div class="alert alert-warning">\n  You must be logged as an admin to do that...\n</div>\n'}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),n=n||{};var o,r=this;return o=i.unless.call(t,t&&t.isAdmin,{hash:{},inverse:r.noop,fn:r.program(1,a,n),data:n}),o||0===o?o:""},Hull.component({templates:["main"],require:["formbuilder"],datasources:{form:function(){var e={path:this.options.id};return this.options.namespace&&(e.provider="admin@"+this.options.namespace),this.api(e)}},initialize:function(){Formbuilder.options.AUTOSAVE=!1,this.injectLinkTag("formbuilder"),this.injectLinkTag("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.min")},beforeRender:function(e){this.formId=e.form.id,e.isAdmin=e.me.id&&e.me.is_admin},afterRender:function(e){if(this.options.namespace||e.isAdmin){var t=this,i=[];e.form.extra&&e.form.extra.fields&&(i=e.form.extra.fields||[]),this.$builder=new Formbuilder({selector:this.$el,bootstrapData:i}),this.$builder.on("save",function(e){t.saveForm.call(t,JSON.parse(e).fields)})}},saveForm:function(e){var t={path:this.formId};this.options.namespace&&(t.provider="admin@"+this.options.namespace),this.api.put(t,{type:"form",extra:{fields:e}})},injectLinkTag:function(e){if(!this.linkTagInjected&&this.options.injectLinkTag!==!1){var t=document.createElement("link"),i=e+".css";/^http/.test(e)||(i=this.options.baseUrl+"/css/"+i),t.href=i,t.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(t),this.linkTagsInjected=!0}}});